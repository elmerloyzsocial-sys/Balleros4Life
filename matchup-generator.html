<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BBall Matchup List</title>
	/* <link rel="stylesheet" href="scoreboard-theme.css"> */
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
            font-size: 16px;
        }
        .container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            max-width: 1200px;
            margin: 0 auto;
        }
        .left-column {
            width: 100%;
            max-width: 700px;
        }
        .right-column {
            width: 100%;
            max-width: 300px;
            padding-top: 20px;
        }
        .section {
            background-color: white;
            border: 1px solid #ddd;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        .section input.title {
            font-size: 1.2em;
            width: 100%;
            border: none;
            background: transparent;
            font-weight: bold;
            margin-bottom: 10px;
        }
        ul {
            list-style-type: none;
            padding: 0;
        }
        li {
            padding: 8px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .counter {
            background-color: #eee;
            padding: 4px 8px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        button {
            margin: 10px 0;
            padding: 10px 15px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            width: 100%;
            max-width: 200px;
        }
        button:hover {
            background-color: #0056b3;
        }
        .remove-btn, .delete-game-btn {
            background-color: #dc3545;
            padding: 5px 10px;
            font-size: 0.8em;
            max-width: 100px;
        }
        .remove-btn:hover, .delete-game-btn:hover {
            background-color: #c82333;
        }
        select {
            margin: 10px 0;
            padding: 8px;
            width: 100%;
            max-width: 200px;
            border-radius: 3px;
        }
        .game-player {
            display: flex;
            align-items: center;
        }
        .game-player input[type="checkbox"] {
            margin-left: 10px;
        }
        input[type="text"] {
            padding: 8px;
            width: 100%;
            max-width: 300px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 3px;
        }
        .game-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        @media screen and (min-width: 768px) {
            .left-column {
                width: 70%;
            }
            .right-column {
                width: 25%;
            }
            button, select {
                width: auto;
            }
        }
        @media screen and (max-width: 480px) {
            body {
                margin: 10px;
                font-size: 12px;
            }
            .section {
                padding: 8px;
            }
            button, select, input[type="text"] {
                font-size: 0.8em;
                padding: 6px;
            }
            .container {
                flex-direction: column;
				margin: 0 auto;
            }
            .remove-btn, .delete-game-btn {
                font-size: 0.7em;
                padding: 4px 6px;
            }
        }
        @media print {
            .no-print {
                display: none;
            }
            .left-column {
                width: 100%;
            }
            .right-column {
                display: none;
            }
        }
		.site-header {
      background-image: url('images/background.jpg'); /* Path to your image in the repository */
      background-size: cover; /* Ensures the image covers the entire header */
      background-position: center; /* Centers the image */
      background-repeat: no-repeat; /* Prevents the image from repeating */
      color: white; /* Text color for contrast, adjust as needed */
      padding: 20px; /* Optional: Adds padding for better appearance */
    }
    .header-content {
      max-width: 1200px; /* Optional: Limits content width */
      margin: 0 auto; /* Centers content */
    }
    .site-header h1 {
      margin: 0;
      font-size: 2.5em;
    }
    .site-header nav {
      margin-top: 10px;
    }
    .site-header nav a {
      color: white; /* Link color for contrast */
      text-decoration: none; /* Removes underline from links */
      margin: 0 15px; /* Spacing between links */
      font-size: 1.1em;
    }
    .site-header nav a:hover {
      text-decoration: underline; /* Underline on hover for better UX */
    }
    </style>
</head>
<body>
    <h1 style="display: flex; justify-content: space-between; align-items: center;">
		Bball Matchups

		<div id="header-tools" style="display: flex; gap: 20px; align-items: center;">
        
			<!-- ⏱ Timer Section -->
			<div id="timer-section">
				<input type="number" id="timer-minutes" value="10" min="0"> min
				<input type="number" id="timer-seconds" value="0" min="0" max="59"> sec
				<span id="timer-display">01:00</span>
				<button onclick="startTimer()">Start</button>
				<button onclick="stopTimer()">Stop</button>
				<button onclick="resetTimer()">Reset</button>
				<button onclick="playBuzzer()">Test Buzzer</button>
			</div>

			<!-- 🏀 Scoreboard Section -->
			<div id="scoreboard">
				<span>Team A: <span id="scoreA">0</span></span>
				<button onclick="updateScore('A', 1)">+1</button>
				<button onclick="updateScore('A', -1)">-1</button>
				&nbsp;&nbsp;
				<span>Team B: <span id="scoreB">0</span></span>
				<button onclick="updateScore('B', 1)">+1</button>
				<button onclick="updateScore('B', -1)">-1</button>
			</div>
		</div>
	</h1>
    <div class="container">
        <div class="left-column">
            <div id="player-list" class="section">
                <input type="text" class="title" value="List of players" onblur="saveData()">
                <ul id="players"></ul>
                <input type="text" id="new-player" placeholder="Add new player" class="no-print">
                <button onclick="addPlayer()" class="no-print">Add Player</button>
				<button onclick="clearPlayers()">Clear All Players</button>
            </div>
            <div id="games"></div>
				<button onclick="addGame()" class="no-print">Add New Game</button>
            <div>
			<div contenteditable="true" onblur="updateGameTitle(1, this.innerText)">Game 1, Court 1</div>
        <div class="right-column">
            <button onclick="printGames()">Print Games Data</button>			
        </div>
    </div>
	<p><a href="index.html">Back to Home</a></p>
<footer>
    &copy; 2025 Balleros4Life &mdash; Mobile Club Portal
</footer>
    <script>
        let players = [];
        let games = [];
        let playerId = 1;

        function loadData() {
            try {
                const savedData = localStorage.getItem('basketballManager');
                if (savedData) {
                    const data = JSON.parse(savedData);
                    players = data.players || [];
                    games = data.games || [];
                    playerId = data.playerId || 1;
                }
                renderPlayers();
                renderGames();
            } catch (e) {
                console.error('Error loading data from localStorage:', e);
            }
        }

        function saveData() {
            try {
                const data = { players, games, playerId };
                localStorage.setItem('basketballManager', JSON.stringify(data));
            } catch (e) {
                console.error('Error saving data to localStorage:', e);
            }
        }

        function addPlayer() {
            const nameInput = document.getElementById('new-player');
            const name = nameInput.value.trim();
            if (name) {
                players.push({ id: playerId++, name, gamesPlayed: 0 });
                nameInput.value = '';
                renderPlayers();
                saveData();
            }
        }
		
		function clearPlayers() {
				players = [];
				document.getElementById('players').innerHTML = '';
				saveData();
		}

        function renderPlayers() {
            const ul = document.getElementById('players');
            ul.innerHTML = '';
            players.forEach((player, index) => {
                const li = document.createElement('li');
                li.innerHTML = `${player.name} <span class="counter">${player.gamesPlayed}</span>`;
                ul.appendChild(li);
            });
            updateAllSelects();
        }

        function addGame() {
            const gameNumber = games.length + 1;
            const newGame = { id: gameNumber, title: `Game ${gameNumber}, Court 1`, players: [], marked: false };
            // Add all players from the player list
				newGame.players = players.map(player => player.id);
				games.push(newGame);
				renderGames();
				saveData();
        }

        function deleteGame(gameId) {
            games = games.filter(game => game.id !== gameId);
            renderGames();
            saveData();
        }

        function renderGames() {
            const container = document.getElementById('games');
            container.innerHTML = '';
            games.forEach(game => {
                const div = document.createElement('div');
                div.className = 'section game';
                div.innerHTML = `
                    <input type="text" class="title" value="${game.title}" onblur="updateGameTitle(${game.id}, this.value)">
                    <ul id="game-players-${game.id}"></ul>
                    <div class="game-actions no-print">
                        ${game.players.length < 10 && !game.marked ? `
                            <select id="select-player-${game.id}"></select>
                            <button onclick="addToGame(${game.id})">Add to Game</button>
                        ` : ''}
                        ${game.players.length === 10 && !game.marked ? `
                            <button onclick="markPlayed(${game.id})">Mark Played</button>
                        ` : ''}
                        <button class="delete-game-btn" onclick="deleteGame(${game.id})">Delete Game</button>
                    </div>
                `;
                container.appendChild(div);
                renderGamePlayers(game);
                updateSelect(game.id);
            });
        }

        function updateGameTitle(gameId, newTitle) {
            const game = games.find(g => g.id === gameId);
            if (game) game.title = newTitle;
            saveData();
        }

        function renderGamePlayers(game) {
            const ul = document.getElementById(`game-players-${game.id}`);
            ul.innerHTML = '';
            game.players.forEach((playerId, index) => {
                const player = players.find(p => p.id === playerId);
                if (player) {
                    const li = document.createElement('li');
                    li.className = 'game-player';
                    li.innerHTML = `${index + 1}. ${player.name}`;
                    if (!game.marked) {
                        li.innerHTML += `
                            <input type="checkbox" checked class="no-print" onchange="togglePlay(${game.id}, ${playerId}, this.checked)">
                            <button onclick="removePlayer(${game.id}, ${playerId})" class="remove-btn no-print">Remove</button>
                        `;
                    } else {
                        li.innerHTML += ` <span>(Played)</span>`;
                    }
                    ul.appendChild(li);
                }
            });
        }

        function updateAllSelects() {
            games.forEach(game => updateSelect(game.id));
        }

        function updateSelect(gameId) {
            const select = document.getElementById(`select-player-${gameId}`);
            if (select) {
                select.innerHTML = '';
                const option = document.createElement('option');
                option.value = '';
                option.text = 'Select player';
                select.appendChild(option);
                players.forEach(player => {
                    if (!games.find(g => g.id === gameId).players.includes(player.id)) {
                        const opt = document.createElement('option');
                        opt.value = player.id;
                        opt.text = player.name;
                        select.appendChild(opt);
                    }
                });
            }
        }

        function addToGame(gameId) {
            const select = document.getElementById(`select-player-${gameId}`);
            const playerId = parseInt(select.value);
            if (playerId) {
                const game = games.find(g => g.id === gameId);
                if (game.players.length < 10) {
                    game.players.push(playerId);
                    renderGames();
                    saveData();
                }
            }
        }

        function removePlayer(gameId, playerId) {
            const game = games.find(g => g.id === gameId);
            if (game && !game.marked) {
                game.players = game.players.filter(id => id !== playerId);
                renderGames();
                saveData();
            }
        }

        function markPlayed(gameId) {
            const game = games.find(g => g.id === gameId);
            if (game && !game.marked && game.players.length === 10) {
                game.players.forEach(playerId => {
                    const player = players.find(p => p.id === playerId);
                    if (player) player.gamesPlayed++;
                });
                game.marked = true;
                renderPlayers();
                renderGames();
                saveData();
            }
        }

        function togglePlay(gameId, playerId, checked) {
            // Optional: Can be used for custom logic if unchecking a player is needed.
        }

        function printGames() {
            window.print();
        }

        // Initial load
        loadData();
        if (games.length === 0) addGame();
    </script>
	<script src="timer.js">
	</script>
	<link rel="stylesheet" href="scoreboard-theme.css">
	<audio id="buzzer-sound" src="buzzer.mp3" preload="auto"></audio>
</body>
</html>
