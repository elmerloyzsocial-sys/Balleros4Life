<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Basketball Matchup Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: Arial, sans-serif; background: #f7f7fa; margin: 0; padding: 0; }
    .container { max-width: 500px; margin: 2em auto; background: #fff; padding: 2em 1.5em; border-radius: 10px; box-shadow: 0 2px 12px #aaa2; }
    h1 { text-align: center; color: #263238; }
    label { font-weight: 600; margin-top: 1em; display: block; }
    textarea, input[type=number] { width: 100%; padding: 0.6em 0.7em; border-radius: 6px; border: 1px solid #e5e5e5; margin-top: 0.4em; box-sizing: border-box; font-size: 1.05em; }
    button { background: #f7b32b; color: #222; font-weight: bold; border: none; border-radius: 6px; padding: 0.7em 1.5em; font-size: 1.08em; margin-top: 1em; cursor: pointer; }
    .results { margin-top: 2em; }
    .game { background: #f7f7fa; border-radius: 8px; margin-bottom: 1em; padding: 1em 1em; border: 1px solid #e5e5e5; }
    .game-title { color: #263238; font-size: 1.06em; font-weight: 600; margin-bottom: 0.5em; }
    .unassigned, .notice { color: #d32f2f; margin-top: 1em; padding: 0.8em; background: #fff3f3; border-radius: 6px; border: 1px solid #ffc3c3; }
    .notice { color: #f57c00; background: #fffbe9; border-color: #ffe0b2; }
    table { width: 100%; border-collapse: collapse; margin-top: 1.5em; background: #f9f9fc; border-radius: 8px; overflow: hidden; }
    th, td { padding: 0.6em 0.8em; border: 1px solid #e5e5e5; text-align: left; }
    th { background: #f7b32b; color: #222; }
    td { background: #fff; }
    caption { text-align: left; font-weight: bold; font-size: 1.08em; margin-bottom: 0.4em; color: #263238; }
    @media (max-width: 600px) {
      .container { max-width: 99vw; padding: 1em 0.3em; }
      table, th, td { font-size: 0.98em; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Basketball Matchup Generator</h1>
    <form id="matchupForm" autocomplete="off">
      <label for="players">List of Players (comma or line separated):</label>
      <textarea id="players" rows="5" placeholder="e.g. John, Mike, Sarah, ..."></textarea>
      <label for="games">Number of Games:</label>
      <input type="number" id="games" min="1" max="99" value="1" />
      <button type="submit">Generate Matchups</button>
    </form>
    <div class="results" id="results"></div>
  </div>
  <script>
    document.getElementById('matchupForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const playerStr = document.getElementById('players').value;
      const numGames = parseInt(document.getElementById('games').value, 10);

      // Parse and clean player names, keep original order for FIFO
      let players = playerStr.split(/[\n,]+/)
        .map(p => p.trim())
        .filter(p => p.length > 0);

      if (players.length === 0) {
        document.getElementById('results').innerHTML = "<div class='unassigned'>Please enter at least one player.</div>";
        return;
      }
      if (numGames < 1) {
        document.getElementById('results').innerHTML = "<div class='unassigned'>Number of games must be at least 1.</div>";
        return;
      }

      // FIFO game generation
      let gamesArr = [];
      let assignments = players.map(p => ({ name: p, assigned: [] }));

      for (let g = 0; g < numGames; g++) {
        let matchup = [];
        let startIdx = (players.length > 10) ? g : (g % players.length);
        // First, check if there are enough players to fill a game without cycling
        if (players.length >= 10) {
          // If more than 10 players, always take the next 10 in order (FIFO window)
          // If window exceeds array, just cycle at the end
          if (players.length > 10 && startIdx + 10 <= players.length) {
            matchup = players.slice(startIdx, startIdx + 10);
          } else if (players.length > 10) {
            // wrap around for window
            let toEnd = players.slice(startIdx);
            let fromStart = players.slice(0, 10 - toEnd.length);
            matchup = toEnd.concat(fromStart);
          } else {
            // Exactly 10 players, always use all
            matchup = players.slice(0, 10);
          }
        } else {
          // Less than 10 players, cycle through
          for (let i = 0; i < 10; i++) {
            matchup.push(players[(startIdx + i) % players.length]);
          }
        }
        gamesArr.push(matchup);

        // Mark assignments for participation table
        matchup.forEach(p => {
          let playerObj = assignments.find(a => a.name === p);
          if (playerObj) playerObj.assigned.push(g + 1);
        });
      }

      // Prepare HTML output: show all games with FIFO order
      let html = "";
      gamesArr.forEach((gamePlayers, idx) => {
        html += `<div class="game">
          <div class="game-title">Game ${idx + 1} Matchup (FIFO):</div>
          <ol>${gamePlayers.map(p => `<li>${p}</li>`).join('')}</ol>
        </div>`;
      });

      // Player games played table, sorted by input order
      html += `<table>
        <caption>Player Participation (First come, first play priority)</caption>
        <thead>
          <tr>
            <th>Priority</th>
            <th>Player Name</th>
            <th>Games Played</th>
            <th>Game Numbers</th>
          </tr>
        </thead>
        <tbody>
        ${assignments.map((a, i) => `
          <tr>
            <td>${i + 1}</td>
            <td>${a.name}</td>
            <td>${a.assigned.length}</td>
            <td>${a.assigned.join(', ')}</td>
          </tr>
        `).join('')}
        </tbody>
      </table>`;

      document.getElementById('results').innerHTML = html;
    });
  </script>
  <p><a href="index.html">Back to Home</a></p>
</body>
</html>